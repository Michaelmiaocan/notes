# MySQL 5.7 环境搭建

* [Windows](#一windows下搭建mysql数据库)
* [Linux](#二linux下搭建mysql数据库)

## 一、Windows下搭建MySQL数据库
1. 官网下载MySQL压缩包 [mysql-5.7.19-winx64.zip](https://dev.mysql.com/downloads/mysql/)
2. 解压文件并修改my.ini的配置，如果没有则新建my.ini文件，配置如下所示：
```
# 根据实际情况修改
[WinMySQLAdmin]
Server="D:\mysql-5.7.16\bin\mysqld.exe"
[client]
no-beep
# pipe
# socket=mysql
port=3306
[mysql]
default-character-set=utf8
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.
[mysqld]
explicit_defaults_for_timestamp = TRUE
# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
innodb_buffer_pool_size = 2G
# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin
# These are commonly set, remove the # and set as required.
basedir="D:\mysql-5.7.16\"
datadir="D:\mysql-5.7.16\data\"
port=3306
server_id=1
general-log=0
general_log_file="mysql_general.log"
slow-query-log=1
slow_query_log_file="mysql_slow_query.log"
long_query_time=10
log-error="mysql_error_log.err"
default-storage-engine=INNODB
max_connections=1024
query_cache_size=128M
key_buffer_size=128M
innodb_flush_log_at_trx_commit=1
innodb_thread_concurrency=128
innodb_autoextend_increment=128M
tmp_table_size=128M
# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M
#sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"
character-set-server=utf8
innodb_flush_method=normal
```

3. 以管理员身份打开cmd窗口后，将目录切换到你的解压文件bin目录下，
再输入mysqld install回车运行就可以了，注意是mysqld不是mysql。

4. 用mysqld  --initialize 先初始化data目录

5. 在data目录mysql_error_log文件，找[Note] A temporary password is generated for root@localhost:
5ZC=7Qe&eneg

6. 启动服务net start mysql 或在服务中启动

7. 使用第5步得到的密码登陆MySQL:
```
mysql -u root -p 5ZC=7Qe&eneg
```

8. 开启远程访问
```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION;

##如果你想允许用户myuser从ip为192.168.1.3的主机连接到mysql服务器，并使用mypassword作为密码：
GRANT ALL PRIVILEGES ON *.* TO 'myuser'@'192.168.1.3' IDENTIFIED BY 'mypassword’ WITH GRANT OPTION;
##刷新使得配置生效
FLUSH PRIVILEGES;
```

9. 修改密码
```
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('root');
FLUSH PRIVILEGES;
```

## 二、Linux下搭建MySQL数据库

1. 添加mysql组和mysql用户，用于设置mysql安装目录文件所有者和所属组。
```
groupadd mysql
useradd -r -g mysql mysql

##useradd -r参数表示mysql用户是系统用户，不可用于登录系统。
##useradd -g参数表示把mysql用户添加到mysql用户组中。
```

2.